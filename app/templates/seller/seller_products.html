{% extends "base.html" %}
{% block title %}
    出品済み一覧
{% endblock %}

{% block content %}
    <div class="max-w-3xl mx-auto px-4">
        <!-- タイトル -->
        <h1 class="text-2xl font-bold text-center mb-12 pt-[100px]">出品済み</h1>

        <!-- メイン画像セクション -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-8">
            <div class="flex flex-col md:flex-row gap-6 items-start">
                <!-- 画像 -->
                <div class="w-[450px] h-[275px] flex-shrink-0 overflow-hidden">
                    <img src="{{url_for('static',filename='img/productImg/'+  (recent.img if recent and recent.img else 'default.png'))}}" 
                         alt="商品画像" 
                         class="w-full rounded-lg object-cover">
                </div>
                
                <!-- 詳細とボタン -->
                <div class="flex-1">
                    <h3 class="font-bold mb-2">{{recent.name}}</h3>
                    <p class="text-gray-600 mb-6 h-[120px] overflow-hidden">{{recent.explanation}}</p>
                    <div class="flex flex-col gap-2">
                        <button class="w-full md:w-40 px-6 py-2 border border-gray-300 rounded hover:bg-gray-50 transition cursor-pointer" onclick="editProduct({{ recent.id }})">
                            編集する
                        </button>
                        <button class="w-full md:w-40 px-6 py-2 border border-gray-300 rounded hover:bg-gray-50 transition cursor-pointer" onclick="deleteProduct({{ recent.id }})">
                            削除する
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- サムネイルグリッド -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            {%for product in products%}
            <!-- 画像1 -->
            <div class="bg-white rounded-lg shadow-sm p-3 product-item {% if loop.index > 4 %}hidden{% endif %}" data-index="{{ loop.index }}" >
                <div class="w-[148px] h-[176px] bg-gray-500 shadow-sm overflow-hidden mb-3 flex align-center justify-center">
                    <img src="{{url_for('static',filename='img/productImg/'+  (product.img if product and product.img else 'default.png'))}}" 
                        alt="商品画像" 
                        class="w-full object-cover">
                </div>
                <p class="text-center">{{product.name}}</p>
                <button class="w-full px-4 py-2 mb-2 border border-gray-300 rounded text-sm hover:bg-gray-50 transition cursor-pointer" onclick="editProduct({{ product.id }})">
                    編集する
                </button>
                <button class="w-full px-4 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50 transition cursor-pointer" onclick="deleteProduct({{ product.id }})">
                    削除する
                </button>
            </div>
            {%endfor%}
        </div>
            {% if products|length > 4 %}
            <div class="text-center mt-4">
                <button id="toggle-btn" class="w-[50px] overflow-hidden hover:opacity-50 transition cursor-pointer">
                    <span id="toggle-icon"><img src="/static/img/arrow_down.png" class="object-contain"></span>
                </button>
            </div>
            {% endif %}

            <!-- サンプル 
            <div class="bg-white rounded-lg shadow-sm p-3">
                <img src="{{url_for("static",filename="img/image_22.png")}}" 
                     alt="商品画像3" 
                     class="w-full rounded mb-3">
                <button class="w-full px-4 py-2 mb-2 border border-gray-300 rounded text-sm hover:bg-gray-50 transition cursor-pointer">
                    編集する
                </button>
                <button class="w-full px-4 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50 transition cursor-pointer">
                    削除する
                </button>
            </div>

            <div class="bg-white rounded-lg shadow-sm p-3">
                <img src="{{url_for("static",filename="img/data_sample.png")}}" 
                     alt="商品画像4" 
                     class="w-full rounded mb-3">
                <button class="w-full px-4 py-2 mb-2 border border-gray-300 rounded text-sm hover:bg-gray-50 transition cursor-pointer">
                    編集する
                </button>
                <button class="w-full px-4 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50 transition cursor-pointer">
                    削除する
                </button>
            </div>

            <div class="bg-white rounded-lg shadow-sm p-3">
                <img src="{{url_for("static",filename="img/image51.png")}}" 
                     alt="商品画像5" 
                     class="w-full rounded mb-3">
                <button class="w-full px-4 py-2 mb-2 border border-gray-300 rounded text-sm hover:bg-gray-50 transition cursor-pointer">
                    編集する
                </button>
                <button class="w-full px-4 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50 transition cursor-pointer">
                    削除する
                </button>
            </div>
        -->
        
        <!-- 下矢印アイコン 
        <div class="flex justify-center mb-8">
            <svg class="w-8 h-8 text-gray-400 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
        </div>-->

        <!-- アクションボタン -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="{{ url_for('seller.seller_format') }}" class="block">
                <button class="w-[220px] px-12 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition shadow-md cursor-pointer cursor-pointer">
                    出品する
                </button>
            </a>
            <a href="{{ url_for('seller.seller') }}" class="block">
            <button class="w-[220px] px-12 py-3 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition shadow-sm cursor-pointer cursor-pointer">
                出品トップページへ
            </button>
            </a>
        </div>
    </div>
    <script src="{{url_for('static',filename='js/folder.js')}}"></script>
    <script src="{{url_for('static',filename = 'js/seller_format.js')}}"></script>
{% endblock %}
