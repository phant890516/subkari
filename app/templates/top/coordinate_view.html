{% extends "base.html" %}
{% block title %}
    å•†å“ä¸€è¦§: {{ search_query or "ã™ã¹ã¦" }} 
{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/top_product_view.css') }}">

<div class="breadcrumb">
  <a href="{{ url_for('top.coordinate') }}">SubKari</a> &gt; æ¤œç´¢çµæœ
</div>

<div class="container">
  <aside class="sidebar">
    <!-- ã“ã“ã¯ãã®ã¾ã¾ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¬„ï¼‰ -->
    <div class="filter-section">
      <div class="filter-title">ç¨®åˆ¥</div>
      <div class="filter-options">
        <label class="filter-option"><input type="radio" name="type" checked> ãƒ¦ãƒ‹ã‚»ãƒƒã‚¯ã‚¹</label>
        <label class="filter-option"><input type="radio" name="type"> ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹</label>
      </div>
    </div>
    <div class="filter-section">
      <div class="filter-title">ã‚«ãƒ†ã‚´ãƒª</div>
      <div class="filter-options">
        <label class="filter-option"><input type="checkbox"> ã‚³ãƒ¼ãƒˆ</label>
        <label class="filter-option"><input type="checkbox" checked> ãƒˆãƒƒãƒ—ã‚¹</label>
        <label class="filter-option"><input type="checkbox"> ãƒœãƒˆãƒ ã‚¹</label>
        <label class="filter-option"><input type="checkbox"> ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼</label>
      </div>
    </div>
    <div class="filter-section">
      <div class="filter-title">ãƒ–ãƒ©ãƒ³ãƒ‰</div>
      <div class="filter-options">
        <div class="filter-option">TRAVAS TOKYO</div>
        <div class="filter-option">REFLEM</div>
        <div class="filter-option">CIVARIZE</div>
        <div class="filter-option">BRI</div>
        <div class="filter-option">Amilige</div>
        <div class="filter-option">VOLCAN & APHRODITE</div>
        <div class="filter-option">THCC PSYYNXX</div>
        <div class="filter-option">KINGLYMASK</div>
        <div class="filter-option">QY</div>
        <div class="filter-option">Ark Rouge</div>
        <div class="filter-option">LIZ LISA</div>
        <div class="filter-option">Mars</div>
        <div class="filter-option">No - Brand</div>
        <div class="filter-option">ãã®ä»–</div>
      </div>
    </div>
    <div class="filter-section">
      <div class="filter-title">ã‚«ãƒ©ãƒ¼</div>
      <div class="filter-options">
        <!-- è‰²ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼ˆçœç•¥ï¼‰ -->
      </div>
      <div class="filter-btn">
        <button onclick="clearFilter()">ã‚¯ãƒªã‚¢</button>
        <button onclick="applyFilter()">OK</button>
      </div>
    </div>
    <div class="filter-section">
      <div class="filter-title">ä¾¡æ ¼</div>
      <div class="price-filter">
        <input type="number" value="0" min="0"><span>å††</span><span>ã€œ</span>
        <input type="number" value="100000" min="0"><span>å††</span>
      </div>
      <div class="filter-btn">
        <button onclick="clearPrice()">ã‚¯ãƒªã‚¢</button>
        <button onclick="applyPrice()">OK</button>
      </div>
    </div>
  </aside>

  <main class="main-content">
    <h1 class="page-title">
      {% if search_query %}
        "{{ search_query }}" ã®æ¤œç´¢çµæœ 
      {% else %}
        å…¨å•†å“ 
      {% endif %}
      ({{ products | length }} ä»¶)
    </h1>

    <!-- ğŸ”½ ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¿½åŠ  -->
    <div class="tab-menu">
      <button class="tab-button active" data-tab="coordinate">Coordinate</button>
      <button class="tab-button" data-tab="tops">Tops</button>
      <button class="tab-button" data-tab="bottoms">Bottoms</button>
      <button class="tab-button" data-tab="accessories">Accessories</button>
    </div>

    <!-- ğŸ”½ ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="tab-content-container">
      <div id="coordinate" class="tab-content active">
        <div class="product-grid">
          {% for product in coordinate_products %}
          <div class="product-card" onclick="window.location.href = '/product-detail/{{ product.id }}'">
            <div class="product-image">
              <img src="{{ url_for('static', filename='img/image_22.png') }}" alt="{{ product.name }}">
            </div>
            <div class="product-brand">{{ product.brand }}</div>
            <div class="product-name">{{ product.name }}</div>
            <div class="product-price">Â¥{{ "{:,.0f}".format(product.price) }}</div>
          </div>
          {% endfor %}
        </div>
      </div>

      <div id="tops" class="tab-content">
        <div class="product-grid">
          {% for product in tops_products %}
          <div class="product-card" onclick="window.location.href = '/product-detail/{{ product.id }}'">
            <div class="product-image">
              <img src="{{ url_for('static', filename='img/image_22.png') }}" alt="{{ product.name }}">
            </div>
            <div class="product-brand">{{ product.brand }}</div>
            <div class="product-name">{{ product.name }}</div>
            <div class="product-price">Â¥{{ "{:,.0f}".format(product.price) }}</div>
          </div>
          {% endfor %}
        </div>
      </div>

      <div id="bottoms" class="tab-content">
        <div class="product-grid">
          {% for product in bottoms_products %}
          <div class="product-card" onclick="window.location.href = '/product-detail/{{ product.id }}'">
            <div class="product-image">
              <img src="{{ url_for('static', filename='img/image_22.png') }}" alt="{{ product.name }}">
            </div>
            <div class="product-brand">{{ product.brand }}</div>
            <div class="product-name">{{ product.name }}</div>
            <div class="product-price">Â¥{{ "{:,.0f}".format(product.price) }}</div>
          </div>
          {% endfor %}
        </div>
      </div>

      <div id="accessories" class="tab-content">
        <div class="product-grid">
          {% for product in accessories_products %}
          <div class="product-card" onclick="window.location.href = '/product-detail/{{ product.id }}'">
            <div class="product-image">
              <img src="{{ url_for('static', filename='img/image_22.png') }}" alt="{{ product.name }}">
            </div>
            <div class="product-brand">{{ product.brand }}</div>
            <div class="product-name">{{ product.name }}</div>
            <div class="product-price">Â¥{{ "{:,.0f}".format(product.price) }}</div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </main>
</div>

<script>
  // âœ… ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
  document.querySelectorAll(".tab-button").forEach(btn => {
    btn.addEventListener("click", () => {
      // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®activeåˆ‡ã‚Šæ›¿ãˆ
      document.querySelectorAll(".tab-button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ‡ã‚Šæ›¿ãˆ
      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
      document.getElementById(btn.dataset.tab).classList.add("active");
    });
  });

  // âœ… ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é–¢é€£å‡¦ç†
  function clearFilter() {
    document.querySelectorAll('.filter-options input').forEach(i => i.checked = false);
    document.querySelector('input[name="type"]').checked = true;
  }

  function applyFilter() {
    alert('ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨ã—ã¾ã—ãŸ (æ¤œç´¢å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„)');
  }

  function clearPrice() {
    const inputs = document.querySelectorAll('.price-filter input');
    inputs[0].value = 0;
    inputs[1].value = 100000;
  }

  function applyPrice() {
    alert('ä¾¡æ ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨ã—ã¾ã—ãŸ (æ¤œç´¢å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„)');
  }
</script>

<style>
/* ğŸ”½ ã‚¿ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ */
.tab-menu {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin: 20px 0;
}

.tab-button {
  padding: 10px 20px;
  border: none;
  background: #eee;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.tab-button.active {
  background: #000;
  color: #fff;
  transform: scale(1.05);
}

/* ğŸ”½ ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.tab-content {
  display: none;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.tab-content.active {
  display: block;
  opacity: 1;
  transform: translateY(0);
}
</style>

{% endblock %}
